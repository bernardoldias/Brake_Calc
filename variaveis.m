clc;
close all;
clear;

global arc afc Pr Fd asf asr ub rbf rbr fx1 scf rr hcg wb balance_bar Fx Fz m cgx g fx3

fx3 = 1703.77; %fx do pneu traseiro depois da transferencia de carga
g = 9.81; %gravidade [m/s²]
cgx = 0.51; %distribuição de massa em relação ao eixo traseiro
m = 290; %massa do carro [Kg]
balance_bar = 0.52; %balance bar
rr = 222.9; % roling radius [mm]
scf = 0.66; %scaling factor 
fx1 = 1858.19; %força de frenagem máxima longitudinal pra pressão de 12 psi [N]
rbr = 78; %raio efetivo do disco traseiro [mm]
rbf = 82; %raio efetivo do disco dianteiro [mm]
ub = 0.4; %coeficiente de atrito pastilha
asf = 2*793.5468; %area pistão dianteiro [mm²]
asr = 2*793.5468; %area pistão traseiro [mm²]
arc = 199.9996; %area cilindro mestre traseiro [mm²]
afc = 199.9996; %area cilindro mestre dianteiro [mm²]
Pr = 6; %pedal ratio
Fd = [0:1:500]; %força piloto [N]
hcg = 280; % altura do cg [mm]
wb = 1535; % wheelbase [mm]






%% Fx Fz

Fx = [6, 12, 18, 24, 30, 36, 42, 48, 54, 60, 66, 72, 78, 84, 90, 96, 102, 108, 114, 120, 126, 132, 138, 144, 150, 156, 162, 168, 174, 180, 186, 192, 198, 204, 210, 216, 222, 228, 234, 240, 246, 252, 258, 264, 270, 276, 282, 288, 294, 300, 306, 312, 318, 324, 330, 336, 342, 348, 354, 360, 366, 372, 378, 384, ...
390, 396, 402, 408, 414, 420, 426, 432, 438, 444, 450, 456, 462, 468, 474, 480, 486, 492, 498, 504, 510, 516, 522, 528, 534, 540, 546, 552, 558, 564, 570, 576, 582, 588, 594, 600, 606, 612, 618, 624, 630, 636, 642, 648, 654, 660, 666, 672, 678, 684, 690, 696, 702, 708, 714, 720, 726, 732, 738, 744, 750, 756, 762, 768, 774, 780, 786, 792, 798, 804, 810, 816, 822, 828, 834, 840, 846, 852, 858, 864, 870, 876, 878, 884, 890, 896, 902, 908, 914, 920, 926, 932, 938, 944, 950, 956, 962, 968, 974, 980, 986, 992, 998, 1004, 1010, 1016, 1022, 1028, 1034, 1040, 1046, 1052, 1058, 1064, 1070, 1076, 1082, 1088, 1094, 1100, 1106, 1112, 1118, 1124, 1130, 1136, 1142, 1148, 1154, 1160, 1166, 1172, 1178, 1184, 1190, 1196, 1202, 1208, 1214, 1220, 1226, 1232, 1238, 1244, 1250, 1256, 1262, 1268, 1274, 1280, 1286, 1292, 1298, 1304, 1310, 1316, 1322, 1328, 1334, 1340, 1346, 1352, 1358, 1364, 1370, 1376, 1382, 1388, 1394, 1400, 1406, 1412, 1418, 1424, 1430, 1436, 1442, 1448, 1454, 1460, 1466, 1472, 1478, 1484, 1490, 1496, 1502, 1508, 1514, 1520, 1526, 1532, 1538, 1544, 1550, 1556, 1562, 1568, 1574, 1580, 1586, 1592, 1598, 1604, 1610, 1616, 1622, 1628, 1634, 1640, 1646, 1652, 1658, 1664, 1670, 1676, 1682, 1688, 1694, 1700, 1706, 1712, 1718, 1724, 1730, 1736, 1742, 1748, 1754, 1760, 1766, 1772, 1778, 1784, 1790, 1796, 1802, 1808, 1814, 1820, 1826, 1832, 1838, 1844, 1850, 1856, 1862, 1868, 1874, 1880, 1886, 1892, 1898, 1904, 1910, 1916, 1922, 1928, 1934, 1940, 1946, 1952, 1958, 1964, 1970, 1976, 1982, 1988, 1994, 2000, 2006, 2012, 2018, 2022, 2028, 2034, 2040, 2046, 2052, 2058, 2064, 2070, 2076, 2082, 2088, 2094, 2100, 2106, 2112, 2118, 2124, 2130, 2136, 2142, 2148, 2154, 2160, 2166, 2172, 2178, 2184, 2190, 2196, 2202, 2208, 2214, 2220, 2226, 2232, 2238, 2244, 2250, 2256, 2262, 2268, 2274, 2280, 2286, 2292, 2298, 2304, 2310, 2316, 2322, 2328, 2334, 2340, 2346, 2352, 2358, 2364, 2370, 2376, 2382, 2388, 2394, 2400, 2406, 2412, 2418, 2424, 2430, 2436, 2442, 2448, 2454, 2460, 2466, 2472, 2478, 2484, 2490, 2496, 2502, 2508, 2514, 2519.4, 2524.8, 2530.2000000000003, 2535.6000000000004, 2541.0000000000005, 2546.4000000000005, 2551.8000000000006, 2557.2000000000007, 2562.600000000001, 2568.000000000001, 2573.400000000001, 2578.800000000001, 2584.200000000001, 2589.6000000000013, 2595.0000000000014, 2600.4000000000015, 2605.8000000000015, 2611.2000000000016, 2616.6000000000017, 2622.000000000002, 2627.400000000002, 2632.800000000002, 2638.200000000002, 2643.600000000002, 2649.0000000000023, 2654.4000000000024, 2659.8000000000025, 2665.2000000000025, 2670.6000000000026, 2676.0000000000027, 2681.400000000003, 2686.800000000003, 2692.200000000003, 2697.600000000003, 2703.000000000003, 2708.4000000000033, 2713.8000000000034, 2719.2000000000035, 2724.6000000000035, 2730.0000000000036, 2735.4000000000037, 2740.800000000004, 2746.200000000004, 2751.600000000004, 2757.000000000004, 2762.400000000004, 2767.8000000000043, 2773.2000000000044, 2778.6000000000045, 2784.0000000000045, 2789.4000000000046, 2794.8000000000047, 2800.200000000005, 2805.600000000005, 2811.000000000005, 2816.400000000005, 2821.800000000005, 2827.2000000000053, 2832.6000000000054, 2838.0000000000055, 2843.4000000000055, 2848.8000000000056, 2854.2000000000057, 2859.600000000006, 2865.000000000006, 2870.400000000006, 2875.800000000006, 2881.200000000006, 2886.6000000000063, 2892.0000000000064, 2897.4000000000065, 2902.8000000000065, 2908.2000000000066, 2913.6000000000067, 2919.000000000007, 2924.400000000007, 2929.800000000007, 2935.200000000007, 2940.600000000007, 2946.0000000000073, 2950];

Fz = [1.6059225512528474, 3.211845102505695, 4.817767653758542, 6.42369020501139, 8.029612756264237, 9.635535307517085, 11.241457858769932, 12.84738041002278, 14.453302961275627, 16.059225512528474, 17.665148063781324, 19.27107061503417, 20.876993166287015, 22.482915717539864, 24.088838268792713, 25.69476082004556, 27.300683371298405, 28.906605922551254, 30.512528473804103, 32.11845102505695, 33.724373576309794, 35.33029612756265, 36.93621867881549, 38.54214123006834, 40.148063781321184, 41.75398633257403, 43.35990888382688, 44.96583143507973, 46.571753986332574, 48.17767653758543, 49.78359908883827, 51.38952164009112, 52.995444191343964, 54.60136674259681, 56.20728929384966, 57.81321184510251, 59.41913439635535, 61.025056947608206, 62.63097949886105, 64.2369020501139, 65.84282460136674, 67.44874715261959, 69.05466970387243, 70.6605922551253, 72.26651480637814, 73.87243735763099, 75.47835990888383, 77.08428246013668, 78.69020501138952, 80.29612756264237, 81.90205011389521, 83.50797266514806, 85.11389521640092, 86.71981776765377, 88.32574031890661, 89.93166287015946, 91.5375854214123, 93.14350797266515, 94.749430523918, 96.35535307517085, 97.9612756264237, 99.56719817767654, 101.17312072892939, 102.77904328018224, 104.38496583143508, 105.99088838268793, 107.59681093394077, 109.20273348519362, 110.80865603644648, 112.41457858769932, 114.02050113895217, ...
115.62642369020502, 117.23234624145786, 118.8382687927107, 120.44419134396355, 122.05011389521641, 123.65603644646926, 125.2619589977221, 126.86788154897495, 128.4738041002278, 130.07972665148066, 131.6856492027335, 133.29157175398635, 134.89749430523918, 136.50341685649204, 138.10933940774487, 139.71526195899773, 141.3211845102506, 142.92710706150342, 144.53302961275628, 146.1389521640091, 147.74487471526197, 149.3507972665148, 150.95671981776766, 152.5626423690205, 154.16856492027335, 155.77448747152621, 157.38041002277905, 158.9863325740319, 160.59225512528474, 162.1981776765376, 163.80410022779043, 165.4100227790433, 167.01594533029612, 168.62186788154898, 170.22779043280184, 171.83371298405467, 173.43963553530753, 175.04555808656036, 176.65148063781322, 178.25740318906605, 179.8633257403189, 181.46924829157177, 183.0751708428246, 184.68109339407746, 186.2870159453303, 187.89293849658316, 189.498861047836, 191.10478359908885, 192.7107061503417, 194.31662870159454, 195.9225512528474, 197.52847380410023, 199.1343963553531, 200.74031890660592, 202.34624145785878, 203.9521640091116, 205.55808656036447, 207.16400911161733, 208.76993166287016, 210.37585421412302, 211.98177676537586, 213.58769931662871, 215.19362186788155, 216.7995444191344, 218.40546697038724, 220.0113895216401, 221.61731207289296, 223.2232346241458, 224.82915717539865, 226.43507972665148, 228.04100227790434, 229.64692482915717, 231.25284738041003, 232.8587699316629, 234.46469248291572, 235.0, 237.15559440559446, 239.31118881118886, 241.46678321678326, 243.62237762237766, 245.77797202797206, 247.93356643356645, 250.08916083916085, 252.24475524475525, 254.40034965034965, 256.55594405594405, 258.7115384615385, 260.8671328671329, 263.0227272727273, 265.1783216783217, 267.3339160839161, 269.4895104895105, 271.6451048951049, 273.8006993006993, 275.9562937062937, 278.11188811188816, 280.26748251748256, 282.42307692307696, 284.57867132867136, 286.73426573426576, 288.88986013986016, 291.04545454545456, 293.20104895104896, 295.35664335664336, 297.51223776223776, 299.6678321678322, 301.8234265734266, 303.979020979021, 306.1346153846154, 308.2902097902098, 310.4458041958042, 312.6013986013986, 314.756993006993, 316.9125874125874, 319.06818181818187, 321.22377622377627, 323.37937062937067, 325.53496503496507, 327.69055944055947, 329.84615384615387, 332.00174825174827, 334.15734265734267, 336.31293706293707, 338.46853146853147, 340.6241258741259, 342.7797202797203, 344.9353146853147, 347.0909090909091, 349.2465034965035, 351.4020979020979, 353.5576923076923, 355.7132867132867, 357.8688811188811, 360.0244755244756, 362.18006993007, 364.3356643356644, 366.4912587412588, 368.6468531468532, 370.8024475524476, 372.958041958042, 375.1136363636364, 377.2692307692308, 379.4248251748252, 381.58041958041963, 383.73601398601403, 385.89160839160843, 388.04720279720283, 390.2027972027972, 392.3583916083916, 394.513986013986, 396.6695804195804, 398.8251748251748, 400.9807692307693, 403.1363636363637, 405.2919580419581, 407.4475524475525, 409.6031468531469, 411.7587412587413, 413.9143356643357, 416.0699300699301, 418.2255244755245, 420.38111888111894, 422.53671328671334, 424.69230769230774, 426.84790209790214, 429.00349650349654, 431.15909090909093, 433.31468531468533, 435.4702797202798, 437.62587412587413, 439.7814685314686, 441.93706293706293, ...
444.0926573426574, 446.24825174825173, 448.4038461538462, 450.55944055944053, 452.715034965035, 454.87062937062944, 457.0262237762238, 459.18181818181824, 461.3374125874126, 463.49300699300704, 465.6486013986014, 467.80419580419584, 469.9597902097902, 472.11538461538464, 474.2709790209791, 476.42657342657344, 478.5821678321679, 480.73776223776224, 482.8933566433567, 485.04895104895104, 487.2045454545455, 489.36013986013984, 491.5157342657343, 493.67132867132875, 495.8269230769231, 497.98251748251755, 500.1381118881119, 502.29370629370635, 504.4493006993007, 506.60489510489515, 508.7604895104895, 510.91608391608395, 513.0716783216784, 515.2272727272727, 517.3828671328672, 519.5384615384615, 521.694055944056, 523.8496503496503, 526.0052447552448, 528.1608391608391, 530.3164335664336, 532.472027972028, 534.6276223776224, 536.7832167832169, 538.9388111888112, 541.0944055944057, 543.25, 545.4055944055945, 547.5611888111888, 549.7167832167833, 551.8723776223776, 554.027972027972, 556.1835664335665, 558.3391608391609, 560.4947552447553, 562.6503496503497, 564.8059440559441, 566.9615384615385, 569.1171328671329, 571.2727272727273, 573.4283216783217, 575.5839160839162, 577.7395104895105, 579.895104895105, ...
582.0506993006993, 584.2062937062938, 586.3618881118881, 588.5174825174826, 590.6730769230769, 592.8286713286714, 594.9842657342658, 597.1398601398602, ... 
599.2954545454546, 601.451048951049, 603.6066433566434, 605.7622377622378, 607.9178321678322, 610.0734265734266, 612.229020979021, 614.3846153846154, 616.5402097902098, 618.6958041958043, 620.8513986013986, 623.0069930069931, 625.1625874125874, 627.3181818181819, 629.4737762237762, 631.6293706293707, 633.784965034965, 635.9405594405595, 638.0961538461539, 640.2517482517483, 642.4073426573427, 644.5629370629371, 646.0000000000001, 648.5121951219513, 651.0243902439025, 653.5365853658537, 656.048780487805, 658.5609756097562, 661.0731707317074, 663.5853658536587, 666.0975609756099, 668.6097560975611, 671.1219512195123, 673.6341463414635, 676.1463414634147, 678.6585365853659, 681.1707317073171, 683.6829268292684, 686.1951219512196, 688.7073170731709, 691.2195121951221, 693.7317073170733, 696.2439024390245, 698.7560975609757, 701.2682926829269, 703.7804878048781, 706.2926829268293, 708.8048780487806, 711.3170731707318, 713.8292682926831, 716.3414634146343, 718.8536585365855, 721.3658536585367, 723.8780487804879, 726.3902439024391, 728.9024390243903, 731.4146341463415, 733.9268292682927, 736.439024390244, 738.9512195121953, 741.4634146341465, 743.9756097560977, 746.4878048780489, 749.0000000000001, 751.5121951219513, 754.0243902439025, 756.5365853658537, 759.048780487805, 761.5609756097562, 764.0731707317075, 766.5853658536587, 769.0975609756099, 771.6097560975611, 774.1219512195123, 776.6341463414635, 779.1463414634147, 781.6585365853659, 784.1707317073171, 786.6829268292684, 789.1951219512196, 791.7073170731709, 794.2195121951221, 796.7317073170733, 799.2439024390245, 801.7560975609757, 804.2682926829269, 806.7804878048781, 809.2926829268293, 811.8048780487806, 814.3170731707318, 816.8292682926831, 819.3414634146343, 821.8536585365855, 824.3658536585367, 826.8780487804879, 829.3902439024391, 831.9024390243903, 834.4146341463415, 836.9268292682927, 839.439024390244, 841.9512195121952, 844.4634146341464, 846.9756097560976, 849.4878048780488, 852.0000000000002, 854.5637614678901, 857.12752293578, 859.6912844036699, 862.25504587156, 864.8188073394499, 867.3825688073398, 869.9463302752297, 872.5100917431198, 875.0738532110097, 877.6376146788996, 880.2013761467897, 882.7651376146796, 885.3288990825695, 887.8926605504594, 890.4564220183495, 893.0201834862394, 895.5839449541293, 898.1477064220192, 900.7114678899093, 903.2752293577992, 905.838990825689, 908.4027522935789, 910.9665137614691, 913.530275229359, 916.0940366972488, 918.657798165139, 921.2215596330288, 923.7853211009187, 926.3490825688086, 928.9128440366987, 931.4766055045886, 934.0403669724785, 936.6041284403684, 939.1678899082585, 941.7316513761484, 944.2954128440383, 946.8591743119284, 949.4229357798183, 951.9866972477082, 954.5504587155981, 957.1142201834882, 959.6779816513781, 962.241743119268, 964.8055045871579, 967.369266055048, 969.9330275229379, 972.4967889908278, 975.0605504587179, 977.6243119266078, 980.1880733944977, 982.7518348623876, 985.3155963302777, 987.8793577981676, 990.4431192660575, 993.0068807339474, 995.5706422018375, 998.1344036697274, 1000.6981651376173, 1003.2619266055071, 1005.8256880733973, 1008.3894495412871, 1010.953211009177, 1013.5169724770672, 1016.080733944957, 1018.6444954128469, 1021.2082568807368, 1023.772018348627, 1026.3357798165168, 1028.8995412844067, 1031.4633027522966, 1034.0270642201867, 1036.5908256880766, 1039.1545871559665, 1041.7183486238566, 1044.2821100917465, 1046.8458715596364, 1049.4096330275263, 1051.9733944954164, 1054.5371559633063, 1057.1009174311962, 1059.0];
